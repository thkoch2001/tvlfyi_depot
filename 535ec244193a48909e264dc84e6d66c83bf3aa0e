{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3ee2881e_1a149a13",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-09-17T11:09:34Z",
      "side": 1,
      "message": "Thanks \u0026 welcome!\n\nMy first thought is that we should probably put this in a submodule of builtins instead, as it doesn\u0027t seem to (unless I missed something?) need internal APIs of the `NixString` type.\n\nAre there more builtins that will need this? In that case we may want to introduce `builtins::versions` and move it there, otherwise I think having a `builtins::compare_versions` (i.e. specifically for this function) is also ok.",
      "revId": "535ec244193a48909e264dc84e6d66c83bf3aa0e",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f8ec102_c97e0e64",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000065
      },
      "writtenOn": "2022-09-17T11:39:55Z",
      "side": 1,
      "message": "Yes it is easy to move that somewhere else. The harder part is finding a good place.\n\nThese are the places it is used in nix (might not be exhaustive)\nbuiltins.compareVersions\nbuiltins.splitVersion\nnix-env -u\n\nI don\u0027t know what your plans are for the tvix-cli. If implementing that is far far away builtins::versions would be a good place for now in my opinion.",
      "parentUuid": "3ee2881e_1a149a13",
      "revId": "535ec244193a48909e264dc84e6d66c83bf3aa0e",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac4693a2_763d6ae1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000034
      },
      "writtenOn": "2022-09-17T11:44:16Z",
      "side": 1,
      "message": "Arguably, the parts where nix-env relies on the behavior of builtins (parseDrvName, compareVersions, ...) are its most brittle ones, so I don\u0027t think we\u0027ll want to replicate that in any form. Ideally, we\u0027ll find a declarative solution and there and avoid version comparison altogether :)\n\n\u003e builtins::versions would be a good place for now in my opinion.\n\n+1",
      "parentUuid": "9f8ec102_c97e0e64",
      "revId": "535ec244193a48909e264dc84e6d66c83bf3aa0e",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a15633fd_4fb75be4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000065
      },
      "writtenOn": "2022-09-17T13:43:06Z",
      "side": 1,
      "message": "Moved it",
      "parentUuid": "ac4693a2_763d6ae1",
      "revId": "535ec244193a48909e264dc84e6d66c83bf3aa0e",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    }
  ]
}