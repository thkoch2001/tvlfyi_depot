{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "996863e6_0db7df46",
        "filename": "tvix/nar-bridge/cmd/nar-bridge-pathinfo/main.go",
        "patchSetId": 3
      },
      "lineNbr": 54,
      "author": {
        "id": 1000085
      },
      "writtenOn": "2023-10-04T19:54:23Z",
      "side": 1,
      "message": "nit: `log.Fatal(\"invalid log level\")` with no `return` for consistency",
      "revId": "0aeb0a416edda1d2d3d7d35b50be0cfd672a2fff",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "42898787_423294f0",
        "filename": "tvix/nar-bridge/cmd/nar-bridge-pathinfo/main.go",
        "patchSetId": 3
      },
      "lineNbr": 54,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-10-05T06:06:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "996863e6_0db7df46",
      "revId": "0aeb0a416edda1d2d3d7d35b50be0cfd672a2fff",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad609c3c_6b76fa76",
        "filename": "tvix/nar-bridge/pkg/pathinfosvc/server.go",
        "patchSetId": 3
      },
      "lineNbr": 72,
      "author": {
        "id": 1000085
      },
      "writtenOn": "2023-10-04T19:54:23Z",
      "side": 1,
      "message": "Why do a `HEAD` request first? Presumably if it exists, we always want to read the contents, so might as well go straight for a `GET`",
      "revId": "0aeb0a416edda1d2d3d7d35b50be0cfd672a2fff",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8dccb550_28081e1a",
        "filename": "tvix/nar-bridge/pkg/pathinfosvc/server.go",
        "patchSetId": 3
      },
      "lineNbr": 72,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-10-04T21:02:42Z",
      "side": 1,
      "message": "Right, in this specific instance we definitely want to ingest. Will update.",
      "parentUuid": "ad609c3c_6b76fa76",
      "revId": "0aeb0a416edda1d2d3d7d35b50be0cfd672a2fff",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "665999c1_0ec261df",
        "filename": "tvix/nar-bridge/pkg/pathinfosvc/server.go",
        "patchSetId": 3
      },
      "lineNbr": 72,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-10-05T06:06:43Z",
      "side": 1,
      "message": "Updated.",
      "parentUuid": "8dccb550_28081e1a",
      "revId": "0aeb0a416edda1d2d3d7d35b50be0cfd672a2fff",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a8d2187_190e6db7",
        "filename": "tvix/nar-bridge/pkg/pathinfosvc/server.go",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1000085
      },
      "writtenOn": "2023-10-04T19:54:23Z",
      "side": 1,
      "message": "Need a `resp.Body.Close()` I think, even though we don\u0027t expect or care about the body here.",
      "revId": "0aeb0a416edda1d2d3d7d35b50be0cfd672a2fff",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0acb5a08_93e3a8a6",
        "filename": "tvix/nar-bridge/pkg/pathinfosvc/server.go",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-10-04T21:02:42Z",
      "side": 1,
      "message": "Yes, true. Will update.",
      "parentUuid": "0a8d2187_190e6db7",
      "revId": "0aeb0a416edda1d2d3d7d35b50be0cfd672a2fff",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0d5bbfe1_5f9b8e67",
        "filename": "tvix/nar-bridge/pkg/pathinfosvc/server.go",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-10-05T06:06:43Z",
      "side": 1,
      "message": "This became redundant, because we don\u0027t do the HEAD anymore, and the GET does defer closing the body already.\n\nI also moved the part reading from the response body into its own scope, to ensure we close the http request as early as possible.",
      "parentUuid": "0acb5a08_93e3a8a6",
      "revId": "0aeb0a416edda1d2d3d7d35b50be0cfd672a2fff",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b1f1acbe_f5d5ecd8",
        "filename": "tvix/nar-bridge/pkg/pathinfosvc/server.go",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1000085
      },
      "writtenOn": "2023-10-05T14:20:30Z",
      "side": 1,
      "message": "Defers are only called when functions return, so extra scopes donâ€™t do anything. (one of my big annoyances with Go)",
      "parentUuid": "0d5bbfe1_5f9b8e67",
      "revId": "0aeb0a416edda1d2d3d7d35b50be0cfd672a2fff",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ca960558_eacad9ec",
        "filename": "tvix/nar-bridge/pkg/pathinfosvc/server.go",
        "patchSetId": 3
      },
      "lineNbr": 140,
      "author": {
        "id": 1000085
      },
      "writtenOn": "2023-10-04T19:54:23Z",
      "side": 1,
      "message": "`TODO: Security` :D",
      "revId": "0aeb0a416edda1d2d3d7d35b50be0cfd672a2fff",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3f3943bc_fc1944a3",
        "filename": "tvix/nar-bridge/pkg/pathinfosvc/server.go",
        "patchSetId": 3
      },
      "lineNbr": 140,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-10-04T21:02:42Z",
      "side": 1,
      "message": "Depends on your security model, but yes! This is an easy addition for a followup CL.",
      "parentUuid": "ca960558_eacad9ec",
      "revId": "0aeb0a416edda1d2d3d7d35b50be0cfd672a2fff",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    }
  ]
}