{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7193d962_b8424ff3",
        "filename": "tvix/tools/turbofetch/src/buffer.rs",
        "patchSetId": 5
      },
      "lineNbr": 1,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "Either the module or pub struct Buffer should have a comment describing what\u0027s the purpose of it, and what it adds on top of MagicBuffer.",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "990b0a21_db59ad8b",
        "filename": "tvix/tools/turbofetch/src/buffer.rs",
        "patchSetId": 5
      },
      "lineNbr": 1,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-10T15:13:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7193d962_b8424ff3",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "68501e75_f8a8562a",
        "filename": "tvix/tools/turbofetch/src/buffer.rs",
        "patchSetId": 5
      },
      "lineNbr": 12,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "Why is this Send? Needs a SAFETY comment.",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "89591f7f_5479805f",
        "filename": "tvix/tools/turbofetch/src/buffer.rs",
        "patchSetId": 5
      },
      "lineNbr": 12,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-09T11:07:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "68501e75_f8a8562a",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d70a8ff_e689956a",
        "filename": "tvix/tools/turbofetch/src/lib.rs",
        "patchSetId": 5
      },
      "lineNbr": 7,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "doc-comment",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3b1b58c2_16701cdd",
        "filename": "tvix/tools/turbofetch/src/lib.rs",
        "patchSetId": 5
      },
      "lineNbr": 7,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-09T11:07:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6d70a8ff_e689956a",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f032bf8c_31a12c0b",
        "filename": "tvix/tools/turbofetch/src/lib.rs",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "We don\u0027t use this to ingest NAR files (yet), only narinfo files, but it\u0027s probably okay to just make this u64?",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9f1a798f_3f50ec3c",
        "filename": "tvix/tools/turbofetch/src/lib.rs",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-09T11:07:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f032bf8c_31a12c0b",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "24d8b8e3_682b6af1",
        "filename": "tvix/tools/turbofetch/src/lib.rs",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "This parses (parts of) the response headers, and consumes the response data into the buffer passed in.",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ffd3eb75_fa3fbc77",
        "filename": "tvix/tools/turbofetch/src/lib.rs",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-09T11:07:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "24d8b8e3_682b6af1",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "526b3ff4_eb9bb2e4",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 2,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "each writing what to a common S3 bucket?",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fd44d3eb_5087d5bc",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 2,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-10T15:13:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "526b3ff4_eb9bb2e4",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e13e293_7c7a7996",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 3,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "where\u0027s that list of files to retrieve coming from / parsed?",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "37193fd8_c9f47b36",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 3,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-10T15:13:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5e13e293_7c7a7996",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7c902d1_f54ec743",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 9,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "Wouldnt\u0027t this be a matter of conveying the list of successful/failing requests in the response?",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c7bd39f_742a3a6d",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 9,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-09T11:07:21Z",
      "side": 1,
      "message": "no, because we write files for *ranges*. we want a complete range for every file",
      "parentUuid": "b7c902d1_f54ec743",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0b707b95_08f80040",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 9,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-10T15:13:04Z",
      "side": 1,
      "message": "saving this for a followup, marking resolved for this round.",
      "parentUuid": "7c7bd39f_742a3a6d",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1cc28bbc_3939d3ef",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "Please also document what this function does (on a high-level), not just the shape of the inputs and outputs.",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "19248021_ab00bfab",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-10T15:13:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1cc28bbc_3939d3ef",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "abd1dcf1_fd5449a5",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 44,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "Do we want to pass the host:port into this function? There\u0027s nothing specific to S3 here…",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f223c5c5_0739a7b7",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 44,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-09T11:07:21Z",
      "side": 1,
      "message": "This is pretty S3-specific, and it\u0027ll only get more so when we follow up with auth and retries.\nFor example, the 100-sized chunks specifically match S3\u0027s limits.",
      "parentUuid": "abd1dcf1_fd5449a5",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7ecb30a4_28ee49be",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 44,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-10T15:13:04Z",
      "side": 1,
      "message": "marking resolved (i should have done so on the previous round)",
      "parentUuid": "f223c5c5_0739a7b7",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "303bd102_6e396783",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 65,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "This needs a comment explaining what it does (and I\u0027d probably make the key a function arg that\u0027s passed in from the outside).",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a91284e0_a327e75d",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 65,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-10T15:13:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "303bd102_6e396783",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f737363_c566d242",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 94,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "Needs SAFETY comment. Also, considering this is only used /once/ (before the fan-out), it\u0027s probably fine for this to be a bit slower (but safe).",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9e223706_5e4897b8",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 94,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-09T11:07:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8f737363_c566d242",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c3a4248_ac2edfba",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 111,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "Can we have a second, non-lambda entrypoint into this? See also the other comment.",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "04f13bb6_4e1deb59",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 111,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-10T15:13:04Z",
      "side": 1,
      "message": "saving this for a followup, marking resolved for this round.",
      "parentUuid": "1c3a4248_ac2edfba",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d0c06005_309b7e3a",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 133,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "The fact of the lambda payload being a json serialization of these 3 values is an implementation detail of the lambda-specifics. We should probably add a comment explaining that here.",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "640cf95d_ef6b83d5",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 133,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-10T15:13:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d0c06005_309b7e3a",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab5b817e_ff03a0c3",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 147,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-11-08T11:53:42Z",
      "side": 1,
      "message": "Can we factor out the lambda-specific parsing of request parameters into one function, and call a inner function that receives bucket/start/end, or Params directly? Then probably the remaining outside plumbing is small enough to just be kept inline in the lambda-specific `async fn main`.",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f04e9321_4f8ddd8f",
        "filename": "tvix/tools/turbofetch/src/main.rs",
        "patchSetId": 5
      },
      "lineNbr": 147,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-11-10T15:13:04Z",
      "side": 1,
      "message": "saving this for a followup, marking resolved for this round.",
      "parentUuid": "ab5b817e_ff03a0c3",
      "revId": "38e401a0c97fd7000e8578228cead52b4d381793",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    }
  ]
}