#!/usr/bin/env BQN

#
# Utilities
#

IsAsciiNum â† ('0'âŠ¸â‰¤âˆ§â‰¤âŸœ'9')

ReadInt â† (10âŠ¸Ã—+âŠ£)Â´âˆ˜âŒ½-âŸœ'0' # stolen from leah2

ReadInput â† {â€¢file.Lines âˆ¾ â€¢pathâ€¿"/input/day"â€¿(â€¢Fmt ğ•©)}

#
# 2021-12-01
#

# part 1

day1ExampleData â† 199â€¿200â€¿208â€¿210â€¿200â€¿207â€¿240â€¿269â€¿260â€¿263
day1Input â† ReadIntÂ¨ReadInput 1

# NB: Because distance from the ground is never smaller than zero, it's
# no problem that nudge inserts a zero at the end of the right list
PositiveDeltaCount â† +Â´âˆ˜(âŠ¢<Â«)+ËË˜âˆ˜â†•

! 7 = 1 PositiveDeltaCount day1ExampleData

â€¢Out "Day 1.1: "âˆ¾â€¢Fmt 1 PositiveDeltaCount day1Input

# part 2

! 5 = 3 PositiveDeltaCount day1ExampleData

â€¢Out "Day 1.2: "âˆ¾â€¢Fmt 3 PositiveDeltaCount day1Input

#
# 2021-12-02
#

# part 1

day2ExampleData â† âŸ¨
  "forward 5",
  "down 5",
  "forward 8",
  "up 3",
  "down 8",
  "forward 2",
âŸ©

day2Input â† ReadInput 2

ParseSubmarineCommand â† (((â†•2)âŠ¸((((-1)âŠ¸â‹†)âˆ˜(2âŠ¸|))Ã—(=âŸœ(âŒŠâˆ˜(Ã·âŸœ2))))âˆ˜("duf"âŠ¸âŠ)âˆ˜âŠ‘)Ã—ReadIntâˆ˜(IsAsciiNum/âŠ¢))

SubmarineDestProduct â† {Ã—Â´+Â´ParseSubmarineCommandÂ¨ğ•©}

! 150 = SubmarineDestProduct day2ExampleData

â€¢Out "Day 2.1: "âˆ¾â€¢Fmt SubmarineDestProduct day2Input

# part 2

SubmarineAimedDestProduct â† {
  Ã—Â´+Â´((Ã—Â´)âˆ˜(1âŠ¸â†“)â‰(1âŠ¸âŠ‘))Â¨ (<0â€¿0â€¿0) (âŠ¢âˆ¾((âŠ‘âˆ˜âŒ½âŠ£)+(âŠ‘âŠ¢)))` ParseSubmarineCommandÂ¨ğ•©
}

! 900 = SubmarineAimedDestProduct day2ExampleData

â€¢Out "Day 2.2: "âˆ¾â€¢Fmt SubmarineAimedDestProduct day2Input
