lib â† â€¢Import "../../lib.bqn"
cmds â† 1â†“ '$' ((+`= âŸœ(âŠ‘Â¨))âŠ”âŠ¢) â€¢FLines "input"
paths â† (<âŸ¨âŸ©) {
  ğ•¨ ğ•Š "$ ls": ğ•¨;
  ğ•¨ ğ•Š "$ cd /": âŸ¨âŸ©;
  ğ•¨ ğ•Š "$ cd ..": (-1)â†“ğ•¨;
  ğ•¨ ğ•Š ğ•©: ğ•¨âˆ¾<5â†“ğ•© # "$ cd â€¦"
}` âŠ‘Â¨cmds
ParseLs â† {
  dirsâ€¿files â† 2â†‘((lib.IsAsciiNumâˆ˜âŠ‘âˆ˜âŠ‘)Â¨âŠ”âŠ¢) ((<' ')âŠ¸lib.SplitOn)Â¨ 1â†“ğ•©
  (1âŠ‘Â¨dirs)â‹ˆ(lib.ReadDec 0âŠ¸âŠ‘)Â¨files
}
dirlists â† ParseLsâŒ¾(1âŠ¸âŠ‘)Â¨â¥Šâ‹ˆË˜(("$ cd"âŠ¸â‰¢âŸœ(4âŠ¸â†‘)âˆ˜âŠ‘Â¨)âˆ˜(1âŠ¸âŠ)Ë˜/âŠ¢) (â’â‰ Â¨paths)âŠâ‰pathsâ‰cmds
DirSize â† {âŠ‘ğ•¨ (âŠ‘âˆ˜(1âŠ¸âŠ‘Â¨âˆ˜âŠ£âŠâŠ¢)âŠ‘âŠ£) <ğ•©}
DirName â† âˆ¾'/'âŠ¸âˆ¾Â¨
dirsizes â† âŠ‘Â¨ âŸ¨âŸ© {
  szs ğ•Š âŸ¨dir, subdirsâ€¿filesâŸ©:
  Canon â† DirName dirâŠ¸âˆ¾âŸœâ‹ˆ
  sz â† +Â´filesâˆ¾szsâŠ¸DirSizeâˆ˜CanonÂ¨ subdirs
  szsâˆ¾<szâ‹ˆDirName dir
}ËœÂ´ âŒ½dirlists

â€¢Out "day07.1: "âˆ¾â€¢Fmt +Â´ 100000 (â‰¥/âŠ¢) dirsizes
â€¢Out "day07.2: "âˆ¾â€¢Fmt (30000000-70000000-âŒˆÂ´dirsizes) âŒŠÂ´âˆ˜(â‰¤/âŠ¢) dirsizes
