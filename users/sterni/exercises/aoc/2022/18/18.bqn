lib â† â€¢Import "../../lib.bqn"

i â† (lib.ReadDecÂ¨(<',')âŠ¸lib.SplitOn)Â¨ â€¢FLines "input"
dim â† 1+âŒˆÂ´i
cubes â† iâˆŠËœâ†•dim

views â† âŸ¨0â€¿1â€¿2, 1â€¿2â€¿0, 2â€¿0â€¿1âŸ©
Exposed â† {(6Ã—+Â´â¥Šğ•©)-2Ã—+Â´views{+Â´â¥Š(âˆ§ËË˜)2â†•ğ•¨â‰ğ•©}Â¨<ğ•©}
Interior â† {(Â¬ğ•©)âˆ§Â´views{((lib.Xor`âˆ˜((âˆŠâˆ§âŠ¢)âˆ¨Â»âˆ˜(âˆŠâŒ¾âŒ½âˆ§âŠ¢)))â‰1)âŒ¾(ğ•¨âŠ¸â‰)ğ•©}Â¨<ğ•©}
Displace â† {âŒˆÂ´(â¥ŠâŠ¢â€¿âŒ½â‹ˆâŒœviews){Fâ€¿a ğ•Š ğ•©:((-âˆ˜Â¬âˆ˜(Â»((0âŠ¸=âŠ£)âˆ§>)âŠ¢)âŒˆâŠ¢)â‰1)âŒ¾(F aâŠ¸â‰)ğ•©}Â¨<ğ•©}
Exterior â† (âŠ¢-â—‹Exposed Â¯1âŠ¸=âˆ˜(Displace lib._fix)âˆ˜(-âˆ˜Interior+âŠ¢))

â€¢Out "day18.1: "âˆ¾â€¢Fmt Exposed cubes
â€¢Out "day18.2: "âˆ¾â€¢Fmt Exterior cubes
