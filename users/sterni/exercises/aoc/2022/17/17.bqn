jets â† '>'= "<>" (âˆŠËœ/âŠ¢) â€¢FChars "input"
pieces â† >Â¨âŸ¨1â€¿1â€¿1â€¿1âŸ©â€¿âŸ¨0â€¿1â€¿0,1â€¿1â€¿1,0â€¿1â€¿0âŸ©â€¿âŸ¨0â€¿0â€¿1,0â€¿0â€¿1,1â€¿1â€¿1âŸ©â€¿âŸ¨â‹ˆ1,â‹ˆ1,â‹ˆ1,â‹ˆ1âŸ©â€¿âŸ¨1â€¿1,1â€¿1âŸ©
w â† 7
initial â† 0â€¿wâ¥Š0

# Warning: mutated global!
ji â† 0
_try â† {(âŠ¢ ğ•©Ë™âŸ(â‰ â—‹(+Â´âˆ˜â¥Šâˆ˜âˆ¨âŸœğ•¨)) ğ”½) ğ•©}
Fall â† {
  pushed â† ğ•¨ ((jiâŠ‘jets)â—¶Â«â€¿Â»)Ë˜ _try ğ•©
  ji â†© (â‰ jets)|ji+1
  fallen â† ğ•¨ Â» _try pushed
  ğ•¨ ğ•ŠâŸ(pushedâ‰¢fallen) fallen
}
Height â† â‰ âˆ˜(âˆ¨Â´Ë˜/âŠ¢)
ThrowPiece â† {
  piece â† ğ•© (|ËœâŸœâ‰ âŠ‘âŠ¢) pieces
  chamber â† (((3+â‰ piece)âŠ¸+âˆ˜âŠ‘âˆ˜(1âŠ¸â†‘)âˆ˜âŒ½âˆ˜(1âŠ¸+)âˆ˜/âˆ¨Â´Ë˜)â†‘âŠ¢)âŒ¾âŒ½ğ•¨
  falling â† (â‰ chamber)â†‘(Â»âŸ2 wâŠ¸â†‘)Ë˜piece
  chamber (âŠ£âˆ¨Fall) falling
}

â€¢Out "day17.1: "âˆ¾â€¢Fmt Height initial ThrowPieceËœÂ´ âŒ½â†•2022

# https://mlochbaum.github.io/BQN/doc/control.html#while
While â† {ğ•©{ğ”½âŸğ”¾âˆ˜ğ”½_ğ•£_ğ”¾âˆ˜ğ”½âŸğ”¾ğ•©}ğ•¨@}Â´
{
  target â† 1000000000000
  ji â†© 0 â‹„ i â† 0 â‹„ res â† @

  chamber â† initial
  cycles â† âŸ¨â‰ pieces,â‰ jetsâŸ©â¥Š<âŸ¨âŸ©

  While {ğ•¤â‹„res=@}â€¿{ğ•¤
    chamber â†© chamber ThrowPiece i
    i +â†© 1

    t â† i|Ëœâ‰ pieces
    cycles â†© {
      new â† ğ•©âˆ¾<iâ‹ˆHeight chamber
      res â†© {ğ•Š ğ•©:
        âŸ¨pl,hlâŸ©â€¿Â· â† chk â† Â¯2â†‘new
        pdâ€¿hd â† -Â´âŒ½chk
        @Ë™âŸ(0â‰ pd|target-pl) hl+hdÃ—pdÃ·Ëœtarget-pl
      }âŸ(1<â‰ new) @
      new
    }âŒ¾(tâ€¿jiâŠ¸âŠ‘) cycles
  }

  â€¢Out "day17.2: "âˆ¾â€¢Fmt res
}
