âŸ¨ReadDec, SplitOn, IsAsciiNumâŸ© â† â€¢Import "../../lib.bqn"
rsâ€¿rc â† (<"") SplitOn â€¢FLines "../05/input"

stacks â† {
  count â† '0'-ËœâŠ‘âŒ½' ' (â‰ /âŠ¢) âŠ‘âŒ½rs
  spec â† 0<(-1)â†“(-1)âŒ½âˆ¾(âˆ¾âŸœ0â€¿0â€¿0)Â¨1+â†•count
  ' ' (â‰ /âŠ¢)Â¨â¥Šâ‹ˆË˜â‰>specâŠ¸/Â¨(-1)â†“rs
}

cmds â† {0â€¿1â€¿1-Ëœ ReadDecÂ¨ ((âˆ§Â´IsAsciiNum)Â¨/âŠ¢) (<' ') SplitOn ğ•©}Â¨ rc

_ApplyCmd â† {
  s Fn _self câ€¿fâ€¿t :
  mâ€¿k â† 2â†‘ c ((â‰¤âŸœ(â†•â‰ ))âŠ”âŠ¢) fâŠ‘s
  (Fn m)âŠ¸âˆ¾âŒ¾(tâŠ¸âŠ‘) kË™âŒ¾(fâŠ¸âŠ‘) s
}

â€¢Out "day05.1: "âˆ¾âŠ‘Â¨stacks âŒ½_ApplyCmdËœÂ´ âŒ½ cmds
â€¢Out "day05.2: "âˆ¾âŠ‘Â¨stacks âŠ¢_ApplyCmdËœÂ´ âŒ½ cmds
