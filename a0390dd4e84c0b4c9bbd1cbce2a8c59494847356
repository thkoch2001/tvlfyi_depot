{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "fd3b8e17_31c6faa5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-06-01T13:50:36Z",
      "side": 1,
      "message": "Not a Firefox user and unsure how this Firefox config is threaded through, but LGTM in principal.",
      "revId": "a0390dd4e84c0b4c9bbd1cbce2a8c59494847356",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77488377_03dd1219",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-06-01T13:51:55Z",
      "side": 1,
      "message": "Actually looking at CI it does not look like this change affected NixOS systems which have Firefox and this module installed; so maybe something else is needed in addition?",
      "parentUuid": "fd3b8e17_31c6faa5",
      "revId": "a0390dd4e84c0b4c9bbd1cbce2a8c59494847356",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa1e11c7_e42e9250",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000040
      },
      "writtenOn": "2022-06-01T15:12:13Z",
      "side": 1,
      "message": "\u003e Actually looking at CI it does not look like this change affected NixOS systems which have Firefox and this module installed; so maybe something else is needed in addition?\n\nRebuild with\n\n```\nnixpkgs.config.thunderbird.smartcardSupport \u003d true;\nenvironment.systemPackages \u003d [ pkgs.firefox ];\n```\n\nsee how the wrapper now contains OpenSC bits\n```\n$ grep opensc $(which firefox)\ngrep opensc /nix/store/vrvxq52zc8didvwn767n50cm0jwsi5i1-firefox-100.0.2/bin/firefox \nLD_LIBRARY_PATH\u003d${LD_LIBRARY_PATH/\u0027:\u0027\u0027/nix/store/nyzcjni43ni3igm26saz0d5s4dkiyljy-opensc-0.22.0/lib64\u0027\u0027:\u0027/\u0027:\u0027}\nLD_LIBRARY_PATH\u003d\u0027/nix/store/nyzcjni43ni3igm26saz0d5s4dkiyljy-opensc-0.22.0/lib64\u0027$LD_LIBRARY_PATH\nLD_LIBRARY_PATH\u003d${LD_LIBRARY_PATH/\u0027:\u0027\u0027/nix/store/nyzcjni43ni3igm26saz0d5s4dkiyljy-opensc-0.22.0/lib\u0027\u0027:\u0027/\u0027:\u0027}\nLD_LIBRARY_PATH\u003d\u0027/nix/store/nyzcjni43ni3igm26saz0d5s4dkiyljy-opensc-0.22.0/lib\u0027$LD_LIBRARY_PATH\n```\n\nstart Firefox and confirm through `Settings \u003e Privacy \u0026 Security \u003e Security Devices... \u003e OpenSC PKCS#11 Module`.",
      "parentUuid": "77488377_03dd1219",
      "revId": "a0390dd4e84c0b4c9bbd1cbce2a8c59494847356",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12a3f6bf_d701ffc3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000040
      },
      "writtenOn": "2022-06-01T15:13:41Z",
      "side": 1,
      "message": "Edit: `nixpkgs.config.firefox.smartcardSupport \u003d true;` of course\n(I\u0027m looking into the Thunderbird bits.)",
      "parentUuid": "fa1e11c7_e42e9250",
      "revId": "a0390dd4e84c0b4c9bbd1cbce2a8c59494847356",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a7300d02_eacb6631",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-06-02T12:03:38Z",
      "side": 1,
      "message": "I mean, I have Firefox in the system closure of tverskoy, and also this module. I would have expected this change to affect the tverskoy closure hash because of that, but it did not.",
      "parentUuid": "12a3f6bf_d701ffc3",
      "revId": "a0390dd4e84c0b4c9bbd1cbce2a8c59494847356",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2b70d0a_b1951353",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2022-09-28T11:15:41Z",
      "side": 1,
      "message": "I debugged this a bit further. It looks like setting this via `nixpkgs.config` in system config doesn\u0027t have an effect, but setting `firefox.smartcardSupport \u003d true` in the call to import nixpkgs itself does:\n\n```\n  pkgs \u003d import sources.nixpkgs {\n    inherit system;\n    config \u003d {\n      allowUnfree \u003d true;\n      firefox.smartcardSupport \u003d true;\n    };\n    overlays \u003d [\n      (import ./overlay.nix)\n    ];\n  };\n```",
      "parentUuid": "a7300d02_eacb6631",
      "revId": "a0390dd4e84c0b4c9bbd1cbce2a8c59494847356",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "030f7e35_42306729",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2022-09-29T08:23:18Z",
      "side": 1,
      "message": "@kn let\u0027s abandon this, for the reasons explained in the previous comment.",
      "revId": "a0390dd4e84c0b4c9bbd1cbce2a8c59494847356",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    }
  ]
}