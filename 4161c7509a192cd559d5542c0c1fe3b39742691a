{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d86cfa52_a941d124",
        "filename": "tvix/derivation/src/lib.rs",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1000067
      },
      "writtenOn": "2023-01-02T15:40:33Z",
      "side": 1,
      "message": "Is it okay to handle the error by the except? I can\u0027t pass the result to the caller since the signature of `to_string` requires a `String` as return type (not a `Result`)",
      "revId": "4161c7509a192cd559d5542c0c1fe3b39742691a",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "55e783bb_aa535f6f",
        "filename": "tvix/derivation/src/lib.rs",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-01-02T16:47:43Z",
      "side": 1,
      "message": "I\u0027d prefer if we would not. Maybe the right call here is to have Derivation implement ToString, which can\u0027t fail?",
      "parentUuid": "d86cfa52_a941d124",
      "revId": "4161c7509a192cd559d5542c0c1fe3b39742691a",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e98eb7ce_334a36b5",
        "filename": "tvix/derivation/src/lib.rs",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1000067
      },
      "writtenOn": "2023-01-03T20:45:01Z",
      "side": 1,
      "message": "Sure, that would be an option. Does it mean we would drop support for the current serialize function? Still, I think both would be highly similar - that\u0027s why I\u0027m using the serialization function right now.\n\nDo you see any other use case where we would not write to a string?",
      "parentUuid": "55e783bb_aa535f6f",
      "revId": "4161c7509a192cd559d5542c0c1fe3b39742691a",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea4ada73_fb9177fa",
        "filename": "tvix/derivation/src/lib.rs",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-01-03T20:53:36Z",
      "side": 1,
      "message": "I think it\u0027s fine if we move all of the contents of serialize() into the to_string() method. These ATerms are not too big, we can probably keep them in memory.",
      "parentUuid": "e98eb7ce_334a36b5",
      "revId": "4161c7509a192cd559d5542c0c1fe3b39742691a",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c346b705_c7c2a6c2",
        "filename": "tvix/derivation/src/lib.rs",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1000067
      },
      "writtenOn": "2023-01-03T22:01:09Z",
      "side": 1,
      "message": "I\u0027ll do it in a separate CL. Your decision if you want to wait or merge already :)",
      "parentUuid": "ea4ada73_fb9177fa",
      "revId": "4161c7509a192cd559d5542c0c1fe3b39742691a",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fa38961_7763f62c",
        "filename": "tvix/derivation/src/lib.rs",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-03T22:55:52Z",
      "side": 1,
      "message": "Why does this need to be a `ToString` impl at all?\n\nIf it\u0027s a fallible process I\u0027d expect it to just be a method on the type, and leave `ToString` to the derived `Display` impl",
      "parentUuid": "c346b705_c7c2a6c2",
      "revId": "4161c7509a192cd559d5542c0c1fe3b39742691a",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d7be893_4d0afecd",
        "filename": "tvix/derivation/src/lib.rs",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-01-04T09:55:46Z",
      "side": 1,
      "message": "implementing std::fmt::Display requires us to return a `Result\u003c(), Error\u003e`, but the only errors we\u0027re emitting is errors propagated by the writer we write to.\n\ncl/7740 moves the serialization to ToString.",
      "parentUuid": "3fa38961_7763f62c",
      "revId": "4161c7509a192cd559d5542c0c1fe3b39742691a",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8049ace3_56d70ae6",
        "filename": "tvix/derivation/src/lib.rs",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-04T10:11:39Z",
      "side": 1,
      "message": "So if I understand correctly you are moving to `ToString` to avoid having to deal with fallible writers? There are still cases where that might be more efficient, probably, but it\u0027s not that important for now so lets just move on with whatever works.\n\nHowever, having an `.expect()` in there indicates that something *is* still fallible on our end.",
      "parentUuid": "3d7be893_4d0afecd",
      "revId": "4161c7509a192cd559d5542c0c1fe3b39742691a",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4180157d_b5e84607",
        "filename": "tvix/derivation/src/lib.rs",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 1000067
      },
      "writtenOn": "2023-01-04T11:56:22Z",
      "side": 1,
      "message": "True. After talking to @flokli I removed this implementation and we use the fmt::Display implementation you suggested instead. Thanks!",
      "parentUuid": "8049ace3_56d70ae6",
      "revId": "4161c7509a192cd559d5542c0c1fe3b39742691a",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    }
  ]
}