{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "58deb9d9_926ecb2a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-12-12T09:09:11Z",
      "side": 1,
      "message": "Approving; the choice of where to run this is - imo - separate from the benchmark code. I think I agree with neither of you: I\u0027d want a derivation to *build* the benchmark, but *run* it outside :)",
      "revId": "5d5e53ae9d49e1b4afbad97a3dd5f2cd9b1ee182",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce70e317_3a026dcf",
        "filename": "tvix/glue/benches/eval.rs",
        "patchSetId": 5
      },
      "lineNbr": 29,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-12-12T09:04:59Z",
      "side": 1,
      "message": "Not sure I understand this. You don\u0027t want to benchmark the entire evaluation, but only some part of it? I think it would become very opaque for benchmarking purposes, as there\u0027d be thunk reuse and all sorts of stuff if an evaluation was kept around.",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 29,
        "endChar": 0
      },
      "revId": "5d5e53ae9d49e1b4afbad97a3dd5f2cd9b1ee182",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6808414_af06b42b",
        "filename": "tvix/glue/benches/eval.rs",
        "patchSetId": 5
      },
      "lineNbr": 29,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-12-12T09:16:21Z",
      "side": 1,
      "message": "I\u0027d like to do all the *configuration* and auxillary component setup (what NIX_PATH is configured, what builtins should be available, what\u0027s doing io_handle) before passing in the code to evaluate, and ideally do as little of this static setup inside the timing loop itself.\n\nWe currently need to pass the code to evaluate very early on, so all code \"configuring the evaluator before it runs\" is a bit unergonomic. b/262 tracks a builder pattern and I felt it makes sense to call it out here.",
      "parentUuid": "ce70e317_3a026dcf",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 29,
        "endChar": 0
      },
      "revId": "5d5e53ae9d49e1b4afbad97a3dd5f2cd9b1ee182",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ff92f1b2_488552e0",
        "filename": "tvix/glue/benches/eval.rs",
        "patchSetId": 5
      },
      "lineNbr": 29,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-12-12T10:27:49Z",
      "side": 1,
      "message": "Marked as done, we can still remove this comment if we realize b/262 makes no sense.",
      "parentUuid": "b6808414_af06b42b",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 29,
        "endChar": 0
      },
      "revId": "5d5e53ae9d49e1b4afbad97a3dd5f2cd9b1ee182",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08a90159_99f1e405",
        "filename": "tvix/glue/benches/eval.rs",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1000066
      },
      "writtenOn": "2023-12-12T05:57:51Z",
      "side": 1,
      "message": "The test vectors should not be compiled in; we need to be able to specify them externally, from shell scripts or nix code.",
      "revId": "5d5e53ae9d49e1b4afbad97a3dd5f2cd9b1ee182",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d358888c_b792f16c",
        "filename": "tvix/glue/benches/eval.rs",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-12-12T08:36:45Z",
      "side": 1,
      "message": "No, this is a hand-picked example, and we can add others if they make more sense, by adding the code. If you want to time generic tvix-cli invocations, you can just run the tvix-cli binary and time that.",
      "parentUuid": "08a90159_99f1e405",
      "revId": "5d5e53ae9d49e1b4afbad97a3dd5f2cd9b1ee182",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    }
  ]
}