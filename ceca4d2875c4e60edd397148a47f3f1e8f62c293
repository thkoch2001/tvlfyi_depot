{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "60ab6edb_bc4c31e5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-01-21T11:49:22Z",
      "side": 1,
      "message": "It looks like public-inbox doesn\u0027t ever move mails from `new` to `cur`, so this would touch mails all the time, including those that have already been published. This probably needs a buffered approach, where we sync and tag new email first, and then push it to the maildir ingested by public-inbox.",
      "revId": "ceca4d2875c4e60edd397148a47f3f1e8f62c293",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2689b9a6_6a07bdad",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000066
      },
      "writtenOn": "2023-01-23T02:29:38Z",
      "side": 1,
      "message": "Too bad `msed` does not have an `-i` flag like `sed` does.",
      "revId": "ceca4d2875c4e60edd397148a47f3f1e8f62c293",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c7d2176_01657ff0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2023-01-23T10:33:49Z",
      "side": 1,
      "message": "I think this is intentional - normally, in Maildir, mails are supposed to end in `tmp` while being received, and are then atomically moved to `new`, so stuff in `new` and `cur` can be always assumed to be complete (and immutable?).\n\nThe problems mentioned in https://cl.tvl.fyi/c/depot/+/7815/comments/60ab6edb_bc4c31e5 are what\u0027s currently blocking this from going in - we probably need to receive into one maildir, apply the transformation and then sync into another maildir, that\u0027s consumed by public-inbox - and maybe do some existing email state surgery on the box, because maybe modifying existing already-served email will be a problem?",
      "parentUuid": "2689b9a6_6a07bdad",
      "revId": "ceca4d2875c4e60edd397148a47f3f1e8f62c293",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "092bb636_5fac776f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-23T17:27:19Z",
      "side": 1,
      "message": "Just saw this pop up on the dashboard again, and after thinking about it for a while I think this *will* actually behave correctly if we set the `listid` option in addition.\n\nIt would work like this: public-inbox-watch scans the maildir for mails, but discards any that lack the right header. The script runs and adds the header. The next public-inbox-watch run then correctly finds the mails.\n\nThat way, race-condition problem with this version would be fixed.",
      "revId": "ceca4d2875c4e60edd397148a47f3f1e8f62c293",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    }
  ]
}