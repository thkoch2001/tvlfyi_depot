{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "bf1fea31_211659d4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2024-08-18T19:33:19Z",
      "side": 1,
      "message": "-2 for the cfg(debug_assertions) issue",
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4f3aea76_d9310ebb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2024-08-18T19:33:40Z",
      "side": 1,
      "message": "though, to be clear, I\u0027m in favor of the change overall",
      "parentUuid": "bf1fea31_211659d4",
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3dc081cb_d1f68250",
        "filename": "tvix/eval/src/chunk.rs",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2024-08-18T19:09:41Z",
      "side": 1,
      "message": "can you document this field? why is this necessary?",
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "33483c64_e825b0fd",
        "filename": "tvix/eval/src/chunk.rs",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2024-08-18T22:05:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3dc081cb_d1f68250",
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89168cd4_29c8ba42",
        "filename": "tvix/eval/src/chunk.rs",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2024-08-18T19:09:41Z",
      "side": 1,
      "message": "what is \"9\"? this feels like quite a magic number.\n\nIs this `std::mem::size_of::\u003cvu128\u003e()`?",
      "range": {
        "startLine": 57,
        "startChar": 35,
        "endLine": 57,
        "endChar": 37
      },
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "990b2596_291ca6ae",
        "filename": "tvix/eval/src/chunk.rs",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2024-08-18T22:05:14Z",
      "side": 1,
      "message": "Moved it out into a constant with docs. It\u0027s the maximum size of a u64 varint encoding (required for temporary arrays and offset calculations).",
      "parentUuid": "89168cd4_29c8ba42",
      "range": {
        "startLine": 57,
        "startChar": 35,
        "endLine": 57,
        "endChar": 37
      },
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "81acc9e1_8eae00ec",
        "filename": "tvix/eval/src/chunk.rs",
        "patchSetId": 6
      },
      "lineNbr": 66,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2024-08-18T19:09:41Z",
      "side": 1,
      "message": "```suggestion\n            vu128::decode_u64(\u0026self.code[idx..(idx + 9)].try_into().unwrap())\n```",
      "range": {
        "startLine": 64,
        "startChar": 6,
        "endLine": 66,
        "endChar": 35
      },
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "97fcbb2a_d2a71995",
        "filename": "tvix/eval/src/chunk.rs",
        "patchSetId": 6
      },
      "lineNbr": 66,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2024-08-18T22:05:14Z",
      "side": 1,
      "message": "Those are not equivalent: In the actual code slice there might be fewer than 9 bytes remaining (this is actually a common case, as we have a lot of e.g. `OpConstant(2);OpForce;OpReturn` at the end of a thunk, which is 4).",
      "parentUuid": "81acc9e1_8eae00ec",
      "range": {
        "startLine": 64,
        "startChar": 6,
        "endLine": 66,
        "endChar": 35
      },
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2496daf7_ddb6e589",
        "filename": "tvix/eval/src/compiler/bindings.rs",
        "patchSetId": 6
      },
      "lineNbr": 756,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2024-08-18T19:26:30Z",
      "side": 1,
      "message": "kinda feel like it\u0027ll be worth factoring out \"push an op and its arg\" into a method somehow, though it seems hard to make type safe.",
      "range": {
        "startLine": 755,
        "startChar": 16,
        "endLine": 756,
        "endChar": 54
      },
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a5834468_2f4d1c35",
        "filename": "tvix/eval/src/compiler/bindings.rs",
        "patchSetId": 6
      },
      "lineNbr": 756,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2024-08-18T22:05:14Z",
      "side": 1,
      "message": "I wrote this code more than once, and in more than one language, and tried both versions. In Rust this ends up with a large number of ops actually not using the helper for various reasons, and I decided not to do it for now. Will have to think more, but if we find a good way would definitely like to refactor it.",
      "parentUuid": "2496daf7_ddb6e589",
      "range": {
        "startLine": 755,
        "startChar": 16,
        "endLine": 756,
        "endChar": 54
      },
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "565e3c43_cd2ff210",
        "filename": "tvix/eval/src/compiler/bindings.rs",
        "patchSetId": 6
      },
      "lineNbr": 756,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2024-08-18T22:30:52Z",
      "side": 1,
      "message": "maybe functions like `push_uvarint_op`, `push_...` etc?",
      "parentUuid": "a5834468_2f4d1c35",
      "range": {
        "startLine": 755,
        "startChar": 16,
        "endLine": 756,
        "endChar": 54
      },
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a316694_7cdeccb1",
        "filename": "tvix/eval/src/compiler/mod.rs",
        "patchSetId": 6
      },
      "lineNbr": 280,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2024-08-18T19:26:30Z",
      "side": 1,
      "message": "I know this is already an existing pattern, but... maybe it\u0027s worth factoring out a method for \"are we in a dead scope\"? Seems like it\u0027d improve readability quite a lot",
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4dfa5414_b23ef10e",
        "filename": "tvix/eval/src/compiler/mod.rs",
        "patchSetId": 6
      },
      "lineNbr": 280,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2024-08-18T22:05:14Z",
      "side": 1,
      "message": "I actually pushed a different thing on my TODO-list instead: Measure whether not emitting dead code is even worth it. The compiler is not slow, and I think the difference is minuscule, in that case we could rip out this whole logic and just retain the warning.",
      "parentUuid": "7a316694_7cdeccb1",
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31c892b5_2bef16c2",
        "filename": "tvix/eval/src/compiler/mod.rs",
        "patchSetId": 6
      },
      "lineNbr": 280,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2024-08-18T22:30:52Z",
      "side": 1,
      "message": "ehhh\n\ntvix is slow enough as is, I think literally every CPU instruction is bad atm.",
      "parentUuid": "4dfa5414_b23ef10e",
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9fb3e55_eb3f4145",
        "filename": "tvix/eval/src/compiler/mod.rs",
        "patchSetId": 6
      },
      "lineNbr": 1312,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2024-08-18T19:26:30Z",
      "side": 1,
      "message": "!!! this should be on both of the following lines! (or on a block)",
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "056dacf5_e937be5b",
        "filename": "tvix/eval/src/compiler/mod.rs",
        "patchSetId": 6
      },
      "lineNbr": 1312,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2024-08-18T22:05:14Z",
      "side": 1,
      "message": "Good catch! How interesting that this doesn\u0027t fall over in testing. Could this be dead code?\n\nAnyways, fixed.",
      "parentUuid": "f9fb3e55_eb3f4145",
      "revId": "c690d7893cdc5d16e6e48d0c1c04463e0f8e4fe6",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    }
  ]
}