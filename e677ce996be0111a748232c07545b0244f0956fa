{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d70109f7_2735f628",
        "filename": "tvix/nix-compat/src/derivation/mod.rs",
        "patchSetId": 14
      },
      "lineNbr": 221,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2024-02-21T10:47:44Z",
      "side": 1,
      "message": "I initially wondered why we stopped just using the nixbase32-encoded string as a key (which would remove the need to implement Ord and AtermWriteable for NixHash.\n\nNote we never produce a non-sha256 nixhash, so can\u0027t write any others out, so I\u0027m not super convinced we should be using NixHash here in first place.\n\nBut that\u0027s a personal preference, we can bikeshed about that in a followup, also fine for me :-)\n\nWe should probably still leave a small comment here, like this:\n\n// use NixHash as a key, as it\u0027s more compact in terms of memory.\n// its Ord implementation behaves the same way as the nixbase32-encoded string,\n// And gets encoded to its nixbase32 representation during aterm serialization.\n\n\nâ€¦ and maybe add a debug assertion in AtermWriteable to ensure it\u0027s sha256.",
      "revId": "e677ce996be0111a748232c07545b0244f0956fa",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a7adce09_1f975b80",
        "filename": "tvix/nix-compat/src/nixhash/mod.rs",
        "patchSetId": 14
      },
      "lineNbr": 27,
      "author": {
        "id": 1000036
      },
      "writtenOn": "2024-02-21T10:47:44Z",
      "side": 1,
      "message": "https://cl.tvl.fyi/c/depot/+/10973/comment/0f135a8f_29182a55/ is not done, this doesn\u0027t explain to someone just using NixHash why it Ord is implemented the way it is (and how).",
      "revId": "e677ce996be0111a748232c07545b0244f0956fa",
      "serverId": "4fdfa107-4df9-4596-8e0a-1d2bbdd96e36"
    }
  ]
}